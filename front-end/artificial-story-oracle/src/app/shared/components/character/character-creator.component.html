<div class="character-creator">
  <div class="creator-header">
    <h1>Criar Novo Personagem</h1>
    <div class="step-indicator">
      <div class="step-progress">
        <div 
          class="step-progress__fill"
          [style.width.%]="(currentStep / totalSteps) * 100">
        </div>
      </div>
      <span class="step-text">Passo {{ currentStep }} de {{ totalSteps }}</span>
    </div>
  </div>

  <div class="creator-content">
    <!-- Passo 1: Informa√ß√µes B√°sicas -->
    <div *ngIf="currentStep === 1" class="creator-step">
      <h2>Informa√ß√µes B√°sicas</h2>
      <form [formGroup]="characterForm" class="basic-info-form">
        <div class="form-group">
          <label for="name">Nome do Personagem *</label>
          <input
            id="name"
            type="text"
            formControlName="name"
            placeholder="Digite o nome do seu personagem"
            class="form-input">
          <div *ngIf="characterForm.get('name')?.invalid && characterForm.get('name')?.touched" 
               class="error-message">
            Nome √© obrigat√≥rio e deve ter pelo menos 2 caracteres
          </div>
        </div>

        <div class="form-group">
          <label for="backstory">Hist√≥ria (Opcional)</label>
          <textarea
            id="backstory"
            formControlName="backstory"
            placeholder="Conte a hist√≥ria do seu personagem..."
            class="form-textarea"
            rows="4">
          </textarea>
        </div>
      </form>
    </div>

    <!-- Passo 2: Escolha da Classe -->
    <div *ngIf="currentStep === 2" class="creator-step">
      <h2>Escolha sua Classe</h2>
      <div class="class-grid">
        <div
          *ngFor="let characterClass of characterClasses"
          class="class-card"
          [class.selected]="selectedClass?.id === characterClass.id"
          (click)="selectClass(characterClass)">
          
          <div class="class-icon">{{ characterClass.icon }}</div>
          <h3 class="class-name">{{ characterClass.name }}</h3>
          <p class="class-description">{{ characterClass.description }}</p>
          
          <div class="class-bonuses">
            <h4>B√¥nus de Atributos:</h4>
            <div class="bonus-list">
              <span *ngFor="let bonus of characterClass.statBonuses | keyvalue" class="bonus-item">
                {{ statNames[bonus.key] }} +{{ bonus.value }}
              </span>
            </div>
          </div>
          
          <div class="starting-skills">
            <h4>Habilidades Iniciais:</h4>
            <div class="skill-list">
              <span *ngFor="let skill of characterClass.startingSkills" class="skill-item">
                {{ skill }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Passo 3: Distribui√ß√£o de Atributos -->
    <div *ngIf="currentStep === 3" class="creator-step">
      <h2>Distribui√ß√£o de Atributos</h2>
      
      <div class="stats-header">
        <div class="points-info">
          <span class="points-remaining">Pontos restantes: {{ remainingPoints }}</span>
          <button class="btn btn--secondary" (click)="rollRandomStats()">
            üé≤ Distribuir Aleatoriamente
          </button>
        </div>
      </div>

      <div class="stats-distribution">
        <div *ngFor="let stat of stats | keyvalue" class="stat-row">
          <div class="stat-info">
            <span class="stat-name">{{ statNames[stat.key] }}</span>
            <span class="stat-modifier">({{ getStatModifier(stat.value) }})</span>
          </div>
          
          <div class="stat-controls">
            <button
              class="stat-btn"
              (click)="adjustStat(stat.key, -1)"
              [disabled]="stat.value <= 8">
              -
            </button>
            
            <span class="stat-value">{{ stat.value }}</span>
            
            <button
              class="stat-btn"
              (click)="adjustStat(stat.key, 1)"
              [disabled]="stat.value >= 15 || remainingPoints <= 0">
              +
            </button>
          </div>
          
          <div class="stat-cost">
            Custo: {{ getStatCost(stat.value) }}
          </div>
        </div>
      </div>

      <div class="class-preview" *ngIf="selectedClass">
        <h3>Atributos Finais (com b√¥nus de classe):</h3>
        <div class="final-stats">
          <div *ngFor="let stat of stats | keyvalue" class="final-stat">
            <span>{{ statNames[stat.key] }}:</span>
            <span class="final-value">
              {{ stat.value + (selectedClass.statBonuses[stat.key] || 0) }}
              <span *ngIf="selectedClass.statBonuses[stat.key]" class="bonus">
                (+{{ selectedClass.statBonuses[stat.key] }})
              </span>
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Passo 4: Confirma√ß√£o -->
    <div *ngIf="currentStep === 4" class="creator-step">
      <h2>Confirma√ß√£o</h2>
      
      <div class="character-summary">
        <div class="summary-section">
          <h3>Informa√ß√µes B√°sicas</h3>
          <p><strong>Nome:</strong> {{ characterForm.get('name')?.value }}</p>
          <p><strong>Classe:</strong> {{ selectedClass?.name }}</p>
          <p *ngIf="characterForm.get('backstory')?.value">
            <strong>Hist√≥ria:</strong> {{ characterForm.get('backstory')?.value }}
          </p>
        </div>

        <div class="summary-section">
          <h3>Atributos Finais</h3>
          <div class="final-stats-grid">
            <div *ngFor="let stat of stats | keyvalue" class="stat-summary">
              <span>{{ statNames[stat.key] }}:</span>
              <span>{{ stat.value + (selectedClass?.statBonuses[stat.key] || 0) }}</span>
            </div>
          </div>
        </div>

        <div class="summary-section">
          <h3>Habilidades Iniciais</h3>
          <div class="starting-skills-list">
            <span *ngFor="let skill of selectedClass?.startingSkills" class="skill-badge">
              {{ skill }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="creator-footer">
    <button
      class="btn btn--secondary"
      (click)="cancel()">
      Cancelar
    </button>

    <div class="navigation-buttons">
      <button
        *ngIf="currentStep > 1"
        class="btn btn--secondary"
        (click)="previousStep()">
        ‚Üê Anterior
      </button>

      <button
        *ngIf="currentStep < totalSteps"
        class="btn btn--primary"
        [disabled]="!canProceed()"
        (click)="nextStep()">
        Pr√≥ximo ‚Üí
      </button>

      <button
        *ngIf="currentStep === totalSteps"
        class="btn btn--primary"
        [disabled]="!canProceed()"
        (click)="createCharacter()">
        Criar Personagem
      </button>
    </div>
  </div>
</div>